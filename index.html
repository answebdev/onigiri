<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Onigiri with Yuki | Sign In</title>
  <link rel="icon" href="./favicon.png">
  <!-- Link to Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css"
    integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
</head>

<style>
  .container {
    padding: 8em;
  }

  .form-container {
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .title-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  /* Box Shadows: https://getcssscan.com/css-box-shadow-examples */
  .card {
    box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
  }

  #time-span {
    color: #6b6e73;
    font-weight: 400;
  }
</style>

<body class="ld-redirect">

  <div class="container">

    <form class="form-container" onsubmit="handleSubmit(event)">
      <div class="card" style="width: 30rem;">
        <div class="card-body">
          <div class="title-container">
            <h5 class="card-title">Onigiri with Yuki</h5>
            <h6 class="card-subtitle mb-2 text-body-secondary"><span id="time-span">30 mins</span></h6>
          </div>
          <p class="card-text">Lorem ipsum dolor sit amet consectetur adipisicing elit. Necessitatibus modi
            provident repudiandae cupiditate dolorem ab blanditiis quia! Magni repellat.
          </p>
          <form>
            <div class="mb-3">
              <label for="exampleInputEmail1" class="form-label">Name</label>
              <input type="text" name="name" class="form-control" id="exampleInputEmail1" aria-describedby="name"
                required>
            </div>
            <div class="mb-3">
              <label for="exampleInputEmail1" class="form-label">Email</label>
              <input type="email" name="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp"
                required>
            </div>
            <button type="submit" class="btn btn-primary">Launch Course</button>
          </form>
        </div>
      </div>
    </form>

  </div>

  <script>
    const REDIRECT_BASE = 'story.html';

    function buildRedirectWithQuery(nameRaw, emailRaw) {
      if (nameRaw && emailRaw) {
        const name = encodeURIComponent(nameRaw);
        const email = encodeURIComponent(emailRaw);
        return `${REDIRECT_BASE}?slxapi=%7B%22actor%22%3A%7B%22mbox%22%3A%22mailto%3A${email}%22%2C%22objectType%22%3A%22Agent%22%2C%22name%22%3A%22${name}%22%7D%7D`;
      }
      return;
    }

    function handleSubmit(event) {
      event.preventDefault();
      const form = event.target;
      const name = form.name.value;
      const email = form.email.value;
      const url = buildRedirectWithQuery(name, email);
      if (url) {
        window.location.replace(url);
      }
      return false;
    }
  </script>

  <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
    crossorigin="anonymous"></script>
  <script src="https://unpkg.com/popper.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"></script>

</body>

</html>